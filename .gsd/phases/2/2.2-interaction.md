---
phase: 2
plan: 2.2
wave: 2
---

# Plan 2.2: Interactive Particle Behavior

## Objective
Implement physics-based/shader-based interactions where particles react to cursor movement (magnetism/attraction) and the sphere rotates based on user input.

## Context
- .gsd/SPEC.md (Goal 1: Reacts to cursor/touch)
- src/components/Sphere/ParticleSphere.jsx

## Tasks

<task type="auto">
  <name>Implement Cursor Magnetism</name>
  <files>src/components/Sphere/ParticleSphere.jsx</files>
  <action>
    1. Convert standard `PointsMaterial` to a `shaderMaterial` OR check for per-frame CPU vertex manipulation (simpler for starters, but heavy).
    2. Given standard CPU approach:
       - Use `useFrame` to update particle positions.
       - Track mouse position using `useThree` or `state.pointer`.
       - Calculate distance between each particle and the pointer projected on the sphere surface.
       - Apply force: If close, pull towards pointer. If far -> original position.
       - Use `useMemo` to store original positions.
  </action>
  <verify>Manual Test: Move cursor over sphere, particles should bulge/move towards it.</verify>
  <done>Particles move dynamically.</done>
</task>

<task type="auto">
  <name>Implement Sphere Rotation</name>
  <files>src/components/Sphere/ParticleSphere.jsx</files>
  <action>
    1. Use `useRef` on the `<points>` mesh.
    2. Add `useFrame` logic for continuous slow rotation.
    3. Add Drag controls logic (or simply mapped mouse X/Y to rotation speed/direction) for interactive rotation.
    4. Ensure touch events work (R3F handles pointer events usually).
  </action>
  <verify>Manual Test: Drag to rotate sphere fast, idle rotation slow.</verify>
  <done>Sphere rotates interactively.</done>
</task>

## Success Criteria
- [ ] Moving mouse over sphere attracts nearby particles.
- [ ] Sphere rotates automatically.
- [ ] User can manually rotate the sphere (drag/swipe).
