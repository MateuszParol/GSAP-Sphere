---
phase: 3
plan: 2
wave: 1
---

# Plan 3.2: Case Studies System

## Objective
Implement the dynamic Case Studies system using Sanity.io data. This involves creating a list view, a detail view, and updating the router to handle dynamic slugs.

## Context
- `src/sanityClient.js` (Sanity configuration)
- `studio/schemas/project.js` (Data schema)
- `src/App.jsx` (Routing)

## Tasks

<task type="auto">
  <name>Update Routing</name>
  <files>src/App.jsx, src/pages/ProjectDetails.jsx</files>
  <action>
    1. Create a new empty component `src/pages/ProjectDetails.jsx`.
    2. Update `src/App.jsx` to include the route: `<Route path="projects/:slug" element={<ProjectDetails />} />`.
    3. Determine if `ProjectDetails` should live inside `MainLayout` (likely yes).
  </action>
  <verify>grep "projects/:slug" src/App.jsx</verify>
  <done>Route is registered.</done>
</task>

<task type="auto">
  <name>Implement Case Studies List</name>
  <files>src/pages/CaseStudies.jsx</files>
  <action>
    Fetch and display projects.
    - Import `client` and `urlFor` from `../sanityClient`.
    - Use `useEffect` to fetch `*[_type == "project"]{title, slug, description, mainImage}`.
    - Render a Grid of project thumbnails.
    - Link each thumbnail to `/projects/${project.slug.current}`.
    - Handle "Loading" and "Error" states visually (e.g., a "Scanning..." loader).
  </action>
  <verify>grep "client.fetch" src/pages/CaseStudies.jsx</verify>
  <done>Displays list of projects fetched from Sanity.</done>
</task>

<task type="auto">
  <name>Implement Project Details</name>
  <files>src/pages/ProjectDetails.jsx</files>
  <action>
    Display full project details.
    - Use `useParams` to get the slug.
    - Fetch the specific project: `*[_type == "project" && slug.current == $slug][0]`.
    - Display Title, Image, Description, Technologies (as tags), Live URL, and Repo URL.
    - Add a "Back to Projects" button.
  </action>
  <verify>grep "useParams" src/pages/ProjectDetails.jsx</verify>
  <done>Renders full details for a specific project.</done>
</task>

## Success Criteria
- [ ] Clicking a project in `CaseStudies` navigates to `ProjectDetails`.
- [ ] `ProjectDetails` loads the correct data based on URL slug.
- [ ] Images are rendered using `urlFor`.
- [ ] Layout handles missing data gracefully (e.g., missing repo URL).
